import{_ as n,o as s,c as a,e as t}from"./app.ebc37b2a.js";const e="/assets/组件-1629115179921.0d0f367b.png",p="data:image/png;base64,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",o="/assets/受控组件.5ca7ade1.png",l={},c=t('<ul><li><h1 id="学习目标" tabindex="-1"><a class="header-anchor" href="#学习目标" aria-hidden="true">#</a> 学习目标</h1><ul><li>能够使用函数创建组件 - 函数组件</li><li>能够掌握 class 语法 extends 继承</li><li>能够使用 class 创建组件-类组件</li><li>能够给 React 元素绑定事件</li><li>能够使用 state 与 setState</li><li>能够处理事件中 this 的指向问题</li><li>能够使用受控组件方式处理表单</li></ul><h1 id="组件基本介绍" tabindex="-1"><a class="header-anchor" href="#组件基本介绍" aria-hidden="true">#</a> 组件基本介绍</h1><ul><li>组件是 React 中最基本的内容，使用 React 就是在使用组件</li><li>组件表示页面中的部分功能</li><li>多个组件可以实现完整的页面功能</li><li>组件特点：可复用，独立，可组合</li></ul><p><img src="'+e+`" alt=""></p><h1 id="react-创建组件的两种方式" tabindex="-1"><a class="header-anchor" href="#react-创建组件的两种方式" aria-hidden="true">#</a> React 创建组件的两种方式</h1><h2 id="函数组件" tabindex="-1"><a class="header-anchor" href="#函数组件" aria-hidden="true">#</a> 函数组件</h2><blockquote><p>函数组件：使用 JS 的函数或者箭头函数创建的组件</p></blockquote><ul><li>为了区分普通标签，函数组件的名称必须 <code>大写字母开头</code></li><li>函数组件<code>必须有返回值</code>，表示该组件的结构</li><li>如果组件不渲染任何内容，可以返回 null</li></ul><p>使用函数创建组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">这是我的函数组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用箭头函数创建组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">这是一个函数组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="练习过程中的问题" tabindex="-1"><a class="header-anchor" href="#练习过程中的问题" aria-hidden="true">#</a> 练习过程中的问题</h3><ul><li>return 后敲回车换行了，js 会在 reutrn 后插入分号结束。</li></ul><h2 id="类与继承" tabindex="-1"><a class="header-anchor" href="#类与继承" aria-hidden="true">#</a> 类与继承</h2><h3 id="class-基本语法" tabindex="-1"><a class="header-anchor" href="#class-基本语法" aria-hidden="true">#</a> class 基本语法</h3><ul><li>在 ES6 之前通过构造函数创建对象</li><li>在 ES6 中新增了一个关键字 class, 类 和构造函数类似，用于创建对象 <ul><li>类与对象的区别</li><li>类：指的是一类的事物，是个概念，比如车 手机 水杯等</li><li>对象：一个具体的事物，有具体的特征和行为，比如一个手机，我的手机等， 类可以创建出来对象。</li></ul></li><li>类创建对象的基本语法 <ul><li>基本语法<code>class 类名{ }</code></li><li>构造函数 <code>constructor</code> 的用法，创建对象</li><li>在类中提供方法，直接提供即可</li><li>💥💥 在类中不需要使用分号，分隔（Vue 因为是对象才需要分号分隔）</li></ul></li></ul><h3 id="extends-实现继承" tabindex="-1"><a class="header-anchor" href="#extends-实现继承" aria-hidden="true">#</a> extends 实现继承</h3><ul><li>extends 基本使用</li><li>类可以使用它继承的类中所有的成员（属性和方法）</li><li>类中可以提供自己的属性和方法</li><li>注意：如果想要给类中新增属性，必须先调用 super 方法</li></ul><h3 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h3><ol><li>💥💥 在类中不需要使用分号，分隔（Vue 因为是对象才需要分号分隔）</li><li>类组件需要继承于 <code>React.Component</code></li></ol></li></ul><h2 id="类组件" tabindex="-1"><a class="header-anchor" href="#类组件" aria-hidden="true">#</a> 类组件</h2><blockquote><p>类组件：使用 ES6 的 class 语法创建组件</p></blockquote><p>约定 1：类组件的名称必须是大写字母开头</p><p>约定 2：类组件应该继承<code>React.Component</code>父类，从而可以使用父类中提供的方法或者属性</p><p>约定 3：类组件必须提供<code>render</code>方法，并返回组件的结构，如无需要返回的结构，返回 null</p><p>定义组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">这是一个类组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="将组件提取到单独的-js-文件中" tabindex="-1"><a class="header-anchor" href="#将组件提取到单独的-js-文件中" aria-hidden="true">#</a> 将组件提取到单独的 js 文件中</h2><p>思考：项目中的组件多了之后，该如何组织这些组件呢？</p><ul><li><p>选择一：将所有组件放在同一个 JS 文件中</p></li><li><p>选择二：将每个组件放到单独的 JS 文件中</p></li><li><p><strong>推荐选择二</strong>-组件作为一个独立的个体，一般都会放到一个单独的 JS 文件中</p></li></ul><p>实现方式</p><ol><li>创建 Hello.js</li><li>创建组件（函数 或 类）</li><li>在 Hello.js 中导出该组件</li><li>在 index.js 中导入 Hello 组件</li><li>渲染组件，</li></ol><h2 id="类组件的状态-state" tabindex="-1"><a class="header-anchor" href="#类组件的状态-state" aria-hidden="true">#</a> 类组件的状态 state</h2><ul><li><p>状态<code>state</code>即数据，类似 Vue 中的 data，。</p></li><li><p>React 同样是数据驱动视图 <strong>更新 UI</strong>，（同 Vue 的 data）。</p></li><li><p>状态<code>state</code> 是组件内部的<code>私有数据</code>，独立作用域，（同 Vue 的 data）。</p></li><li><p><code>state的值是一个对象</code>, 表示一个组件中可以有多个数据</p></li><li><p>早期，<strong>只有类组件</strong>，可以定义状态。【现在函数式组件，也可以定义状态】</p></li><li><p>简洁的语法</p></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">state中的数据--</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>复杂的写法</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造函数中，想使用this，super()必须调用</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 组件通过state提供数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">state中的数据--</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结：</strong></p><ol><li><code>state = {}</code> 是固定的写法，独立作用域。</li><li>class 组件中才有声明<code>state</code> 的写法，函数组件中没有</li><li>使用变量，通过<code>this.state.属性名</code> 的方式来访问</li><li>React 中同样是数据驱动视图，数据变化导致 UI 更新。</li><li>早期，<strong>只有类组件</strong>，可以定义状态</li></ol><h2 id="react-插件的安装-没网" tabindex="-1"><a class="header-anchor" href="#react-插件的安装-没网" aria-hidden="true">#</a> react 插件的安装（没网）</h2><p>安装谷歌插件<code>react-devtools</code></p><h2 id="组件类型-有状态组件和无状态组件" tabindex="-1"><a class="header-anchor" href="#组件类型-有状态组件和无状态组件" aria-hidden="true">#</a> 组件类型-有状态组件和无状态组件</h2><ul><li><strong>无状态组件</strong> : 早期，函数组件是不能自己提供数据【前提：基于 hooks 之前说的】</li><li><strong>有状态组件</strong> : 类组件可以自己提供数据，组件内部的状态（数据如果发生了改变，内容会自动的更新），数据驱动视图</li></ul><p><strong>注意</strong>：</p><ul><li>现在函数组件也可以定义状态。【早期，函数组件是没有状态的】</li></ul><ul><li>在复杂的项目中，一般都是由函数组件和类组件共同配合来完成的。【class 增加了使用者的负担，所以后来有了 hooks】</li></ul><h1 id="事件处理" tabindex="-1"><a class="header-anchor" href="#事件处理" aria-hidden="true">#</a> 事件处理</h1><p>问题：React 中怎么给 DOM 绑定一个事件呢？</p><h2 id="注册事件" tabindex="-1"><a class="header-anchor" href="#注册事件" aria-hidden="true">#</a> 注册事件</h2><p>React 注册事件与 DOM 的事件语法非常像</p><p>语法<code>on+事件名=｛事件处理程序｝</code> 比如<code>onClick={this.handleClick}</code></p><p>注意：<strong>React 事件采用驼峰命名法</strong>，比如<code>onMouseEnter</code>, <code>onClick</code></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;点击事件触发了&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="事件对象" tabindex="-1"><a class="header-anchor" href="#事件对象" aria-hidden="true">#</a> 事件对象</h2><ul><li>可以通过事件处理函数的形参获取到事件对象</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;事件对象&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我，不会跳转页面</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ES6 箭头函数补充</p><ol><li>简写省略 return 与 {}。</li><li>return 后的语句会执行。</li><li>箭头函数包一层传参。</li></ol><h2 id="事件传值" tabindex="-1"><a class="header-anchor" href="#事件传值" aria-hidden="true">#</a> 事件传值</h2><ul><li>方法：包一层箭头函数，在箭头函数中，调用处理函数。</li><li>记忆口诀：加个箭头，变成箭头函数。</li></ul><p>写法：</p><ul><li>完整写法</li></ul><div class="language-react line-numbers-mode" data-ext="react"><pre class="language-react"><code>&lt;a
    onClick={(e) =&gt; {
        this.handleClick(e, &#39;hello React&#39;)
    }}
&gt;点我，不会跳转页面&lt;/a&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>简写-<strong>推荐</strong>：省略了花括号，更利于阅读</li></ul><div class="language-react line-numbers-mode" data-ext="react"><pre class="language-react"><code>&lt;a onClick={(e) =&gt; this.handleClick(e, &#39;hello React&#39;) }&gt;点我，不会跳转页面&lt;/a&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="this-指向问题" tabindex="-1"><a class="header-anchor" href="#this-指向问题" aria-hidden="true">#</a> this 指向问题</h2><blockquote><p>事件处理程序中的 this 指向的是 undefined</p><ol><li><p>render 方法中的 this 没有问题，指向当前 react 组件实例。</p></li><li><p><strong>只有事件处理函数中的 this 有问题</strong></p></li></ol></blockquote><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="this-指向问题解决方案" tabindex="-1"><a class="header-anchor" href="#this-指向问题解决方案" aria-hidden="true">#</a> this 指向问题解决方案</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>方案<span class="token number">1</span>：render中使用箭头函数
方案<span class="token number">2</span>：bind修改<span class="token keyword">this</span>指向
方案<span class="token number">3</span>：<span class="token keyword">class</span>箭头函数方法 <span class="token operator">-</span> 推荐✅
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>解决方案 1：在 render 中使用箭头函数</li></ul><p>箭头函数的特点：自身没有 this，访问的是外部的 this</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        &lt;button onClick=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缺点：会把大量的 js 处理逻辑放到 JSX 中，将来不容易维护</p><ul><li>解决方案 2：使用 bind</li><li>原生 JS 复习：apply 和 call 改变 this 指向的同时，会直接调用函数</li><li>原生 JS 复习：bind 只是改变 this 指向，但不调用函数</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>解决方案 3：class 箭头函数方法 - 🔔<strong>推荐</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：这个语法是试验性的语法，但是有 babel 的转义，所以没有任何问题</strong></p><h1 id="setstate-修改状态" tabindex="-1"><a class="header-anchor" href="#setstate-修改状态" aria-hidden="true">#</a> setState 修改状态</h1><p>问题：</p><ol><li>React 中可以修改状态<code>state</code> 吗？</li><li>可以直接像 Vue 一样对状态赋值吗？</li></ol><div class="language-react line-numbers-mode" data-ext="react"><pre class="language-react"><code>class App extends React.Component {
  state = {
    count: 1
  }
  handleClick = () =&gt; {
  // 修改状态state
  }
  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;次数: {this.state.count}&lt;/p&gt;
        &lt;button onClick={this.handleClick}&gt;点我+1&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>组件中的状态是可变的</p></li><li><p>语法<code>this.setState({要修改的数据名: 新的值})</code></p></li><li><p>注意：不要直接修改 state 中的值，必须通过<code>this.setState()</code>方法进行修改</p></li><li><p><code>setState</code>的作用</p><ul><li>修改 state</li><li>更新 UI</li></ul></li><li><p>思想：数据驱动视图</p></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">次数: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>react 中核心理念：<strong>状态不可变</strong><ul><li>不要直接修改 react 中 state 的值，而是提供新的值</li><li>直接修改 react 中 state 的值，组件并不会更新</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ❌错误操作：直接修改值的操作</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ✅正确操作：创建新的值的操作</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="练习-购物车加减" tabindex="-1"><a class="header-anchor" href="#练习-购物车加减" aria-hidden="true">#</a> 练习-购物车加减</h1><blockquote><p>要求：加减按钮，绑定同一个处理函数</p></blockquote><p>效果如下：</p><p><img src="`+p+`" alt="image-20211208215255325"></p><p>基本的组件代码：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>class App extends React.Component {
  state = {
    count: 0,
  };

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;当前数值为：{this.state.count}&lt;/p&gt;
        &lt;hr /&gt;
        &lt;button&gt;+1&lt;/button&gt;
        &lt;span&gt;{this.state.count}&lt;/span&gt;
        &lt;button&gt;-1&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="表单处理" tabindex="-1"><a class="header-anchor" href="#表单处理" aria-hidden="true">#</a> 表单处理</h1><blockquote><p>我们在开发过程中，经常需要操作表单元素，比如获取表单的值或者是设置表单的值。</p></blockquote><p>react 中处理表单元素有两种方式：</p><ul><li>受控组件-表单元素的 value 受到 state 的控制，（类似 Vue 中的 v-model）</li><li>非受控组件（DOM 操作）</li></ul><h2 id="受控组件基本概念" tabindex="-1"><a class="header-anchor" href="#受控组件基本概念" aria-hidden="true">#</a> 受控组件基本概念</h2><ul><li>React 中将 state 中的数据与表单元素的 value 值绑定到了一起，<code>由state的值来控制表单元素的值</code></li><li>但是在 react 中，可变状态通常是保存在 state 中的，并且要求状态只能通过<code>setState</code>进行修改。</li><li>受控组件：<strong>value 值受到了 statet 控制的表单元素</strong></li></ul><p><img src="`+o+`" alt=""></p><h2 id="受控组件使用步骤" tabindex="-1"><a class="header-anchor" href="#受控组件使用步骤" aria-hidden="true">#</a> 受控组件使用步骤</h2><ol><li>在 state 中添加一个状态，作为表单元素的 value 值（控制表单元素的值）</li><li>给表单元素添加 change 事件，设置 state 的值为表单元素的值（控制值的变化）</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见的受控组件" tabindex="-1"><a class="header-anchor" href="#常见的受控组件" aria-hidden="true">#</a> 常见的受控组件</h2><ul><li>文本框、文本域、下拉框（操作 value 属性）</li><li>复选框（操作 checked 属性）</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">usernmae</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isSingle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function-variable function">handleDesc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function-variable function">handleCity</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">city</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function-variable function">handleSingle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isSingle</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        姓名：
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleName<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        描述：<span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>desc<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDesc<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        城市：
        <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCity<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>北京<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>上海<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>广州<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>深圳<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        是否单身：
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isSingle<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSingle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>总结：</p><ol><li><code>react</code> 中<code>change</code> 事件等同于 html 中的<code>input</code> 事件。</li><li><code>react</code>中的<code>blur</code> 事件，等同于 html 中的<code>change</code> 事件。</li><li><strong>推荐</strong>使用<code>onChange</code> 事件监听用户输入，<strong>不推荐</strong>使用<code>onInput</code>。</li></ol><h2 id="多表单元素的优化" tabindex="-1"><a class="header-anchor" href="#多表单元素的优化" aria-hidden="true">#</a> 多表单元素的优化</h2><p>问题：每个表单元素都需要一个单独的事件处理程序，处理太繁琐</p><p>优化：使用一个事件处理程序处理多个表单元素</p><p>步骤</p><ul><li>给表单元素添加 name 属性，名称与 state 属性名相同</li><li>根据表单元素类型获取对应的值</li><li>在事件处理程序中通过<code>[name]</code>修改对应的 state</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isSingle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value<span class="token punctuation">,</span> checked <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value<span class="token punctuation">,</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
    value <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">&#39;checkbox&#39;</span> <span class="token operator">?</span> checked <span class="token operator">:</span> value<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        姓名：
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        描述：<span class="token operator">&lt;</span>textarea name<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>desc<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        城市：
        <span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">&quot;city&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>北京<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>上海<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>广州<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>深圳<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        是否单身：
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;isSingle&quot;</span>
          checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isSingle<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="非受控组件-ref" tabindex="-1"><a class="header-anchor" href="#非受控组件-ref" aria-hidden="true">#</a> 非受控组件-ref</h2><blockquote><p>表单元素的 value 由 DOM 对象控制，不受 state 的控制</p></blockquote><p>思考：</p><ol><li>除了使用<code>state</code> 控制表单的数据，是否有其它的方式？</li></ol><div class="language-react line-numbers-mode" data-ext="react"><pre class="language-react"><code>/**
 * 学习目标：了解非受控组件 - 真实DOM具备管理表单数据的能力
 * 含义：非受控组件-组件内，表单的数据可，可以不受state的控制
 */
import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;

class App extends React.Component {
  handleClick = () =&gt; {
    // 这种不需要state管理数据的表单元素，称之为非受控组件，
    // 获取数据：
    let data = {
      userName: document.querySelector(&#39;#username&#39;).value,
      desc: document.querySelector(&#39;#desc&#39;).value,
      city: document.querySelector(&#39;#city&#39;).value,
      isSingle: document.querySelector(&#39;#isSingle&#39;).checked,
    };

    console.log(data, &#39;data&#39;);
  };

  handleChange = (e) =&gt; {
    // 修改数据
    console.log(e.target.value, &#39;value&#39;);
  }

  render() {
    return (
      &lt;div&gt;
        姓名：
        &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot; /&gt;
        &lt;br /&gt;
        描述：&lt;textarea name=&quot;desc&quot; id=&quot;desc&quot;&gt;&lt;/textarea&gt;
        &lt;br /&gt;
        城市：
        &lt;select name=&quot;city&quot; id=&quot;city&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;北京&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;上海&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;广州&lt;/option&gt;
          &lt;option value=&quot;4&quot;&gt;深圳&lt;/option&gt;
        &lt;/select&gt;
        &lt;br /&gt;
        是否单身：
        &lt;input name=&quot;isSingle&quot; type=&quot;checkbox&quot; id=&quot;isSingle&quot; /&gt;
        &lt;button onClick={this.handleClick}&gt;点击提交到后台&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;));

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结：</strong></p><ol><li>真实 DOM 具备存获取表单数据、修改表单数据的能力</li><li>表单元素，它的值由 DOM 控制，不使用 state 控制，称为非受控组件。</li><li>表单元素，它的值由 state 控制，由 setState 来改变，称为受控组件。</li><li>**推荐-**使用受控组件，React 推荐数据驱动视图。</li></ol><h2 id="ref" tabindex="-1"><a class="header-anchor" href="#ref" aria-hidden="true">#</a> Ref</h2><p><strong>作用：获取组件实例、获取 DOM</strong> （作用与 Vue 中的 Ref 相同)</p><p>目标：使用 Ref 获取文本框的 DOM 元素</p><p>使用步骤：</p><ol><li>调用<code>React.createRef()</code>方法创建一个 ref 对象，用于关联模板中的某个元素，在模板渲染完毕后可以通过 ref 对象访问到模板中的元素。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>txtRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>将创建好的 ref 对象添加到文本框中</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>通过 ref 对象获取文本框的值</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>总结：</p><ol><li>作用：获取组件实例、DOM 对象。 （与 Vue 中的 ref，在作用上相同）</li><li>ref 的价值在于获取 <strong>组件实例对象</strong>。</li><li>使用步骤： <ol><li>创建 ref 对象</li><li>绑定到组件或 DOM 上</li><li>使用<code>this.ref对象.current</code> 获取组件或 DOM</li></ol></li></ol><h1 id="综合案例" tabindex="-1"><a class="header-anchor" href="#综合案例" aria-hidden="true">#</a> 综合案例</h1><p>评论列表案例</p><p>静态结构如下：</p><ol><li>新建<code>src/index.js</code></li><li>新建<code>src/index.css</code></li></ol><p>代码如下，直接复制：</p><p><code>src/index.js</code></p><div class="language-react line-numbers-mode" data-ext="react"><pre class="language-react"><code>import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;

import &#39;./index.css&#39;;

class App extends React.Component {
  state = {
    // 用户名输入框
    username: &#39;&#39;,
    // 评论内容
    content: &#39;&#39;,
  };

  render() {
    return (
      &lt;div className=&quot;app&quot;&gt;
        {/* 表单提交的时候，运行发布评论的函数 */}
        &lt;form onSubmit={this.handlePublish}&gt;
          &lt;input className=&quot;user&quot; type=&quot;text&quot; placeholder=&quot;请输入评论人&quot; /&gt;
          &lt;br /&gt;
          &lt;textarea className=&quot;content&quot; cols=&quot;30&quot; rows=&quot;10&quot; placeholder=&quot;请输入评论内容&quot; /&gt;
          &lt;br /&gt;
          &lt;button&gt;发表评论&lt;/button&gt;
          &lt;button type=&quot;button&quot;&gt;清空评论&lt;/button&gt;
        &lt;/form&gt;
        &lt;ul&gt;
          &lt;li&gt;
            &lt;h3&gt;评论人: xxx&lt;/h3&gt;
            &lt;p&gt;评论内容：xxx&lt;/p&gt;
            &lt;button&gt;删除&lt;/button&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    );
  }
}

// 渲染组件
ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;));

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>src/index.css</code></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.app</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.user</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.no-comment</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="列表展示功能" tabindex="-1"><a class="header-anchor" href="#列表展示功能" aria-hidden="true">#</a> 列表展示功能</h2><p>渲染评论列表（列表渲染）</p><ul><li>在 state 中初始化评论列表数据</li><li>使用数组的 map 方法遍历列表数据</li><li>给每个 li 添加 key 属性</li></ul><h2 id="发表评论功能" tabindex="-1"><a class="header-anchor" href="#发表评论功能" aria-hidden="true">#</a> 发表评论功能</h2><p>获取评论信息，评论人和评论内容（受控组件）</p><ul><li>使用受控组件的方式获取评论数据</li></ul><p>发表评论，更新评论列表（更新状态）</p><ul><li>给 list 增加一条数据</li></ul><p>边界处理</p><ul><li>清空内容</li><li>判断非空</li></ul><h2 id="删除一条评论" tabindex="-1"><a class="header-anchor" href="#删除一条评论" aria-hidden="true">#</a> 删除一条评论</h2><ul><li>给删除按钮，绑定事件处理函数</li><li>事件函数中，通过 id 或 index，删除 list 中一条数据</li></ul><h2 id="清空评论功能" tabindex="-1"><a class="header-anchor" href="#清空评论功能" aria-hidden="true">#</a> 清空评论功能</h2><ul><li>给清空评论按钮注册事件</li><li>通过 setState 清空评论列表</li><li>没有更多评论的处理</li></ul><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h2>`,140),i=[c];function u(r,d){return s(),a("div",null,i)}const v=n(l,[["render",u],["__file","02-组件基础.html.vue"]]);export{v as default};
